import{R as y,r as N,G as P,j as i,L as R}from"./index-DegCdevx.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var E=function(s,o){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])},E(s,o)};function C(s,o){E(s,o);function n(){this.constructor=s}s.prototype=o===null?Object.create(o):(n.prototype=o.prototype,new n)}var m=function(){return m=Object.assign||function(o){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(o[l]=n[l])}return o},m.apply(this,arguments)};function M(s,o,n,e){var t,l=!1,a=0;function p(){t&&clearTimeout(t)}function r(){p(),l=!0}typeof o!="boolean"&&(e=n,n=o,o=void 0);function c(){var f=this,d=Date.now()-a,v=arguments;if(l)return;function h(){a=Date.now(),n.apply(f,v)}function w(){t=void 0}e&&!t&&h(),p(),e===void 0&&d>s?h():o!==!0&&(t=setTimeout(e?w:h,e===void 0?s-d:s))}return c.cancel=r,c}var u={Pixel:"Pixel",Percent:"Percent"},Y={unit:u.Percent,value:.8};function F(s){return typeof s=="number"?{unit:u.Percent,value:s*100}:typeof s=="string"?s.match(/^(\d*(\.\d+)?)px$/)?{unit:u.Pixel,value:parseFloat(s)}:s.match(/^(\d*(\.\d+)?)%$/)?{unit:u.Percent,value:parseFloat(s)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),Y):(console.warn("scrollThreshold should be string or number"),Y)}var H=function(s){C(o,s);function o(n){var e=s.call(this,n)||this;return e.lastScrollTop=0,e.actionTriggered=!1,e.startY=0,e.currentY=0,e.dragging=!1,e.maxPullDownDistance=0,e.getScrollableTarget=function(){return e.props.scrollableTarget instanceof HTMLElement?e.props.scrollableTarget:typeof e.props.scrollableTarget=="string"?document.getElementById(e.props.scrollableTarget):(e.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},e.onStart=function(t){e.lastScrollTop||(e.dragging=!0,t instanceof MouseEvent?e.startY=t.pageY:t instanceof TouchEvent&&(e.startY=t.touches[0].pageY),e.currentY=e.startY,e._infScroll&&(e._infScroll.style.willChange="transform",e._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},e.onMove=function(t){e.dragging&&(t instanceof MouseEvent?e.currentY=t.pageY:t instanceof TouchEvent&&(e.currentY=t.touches[0].pageY),!(e.currentY<e.startY)&&(e.currentY-e.startY>=Number(e.props.pullDownToRefreshThreshold)&&e.setState({pullToRefreshThresholdBreached:!0}),!(e.currentY-e.startY>e.maxPullDownDistance*1.5)&&e._infScroll&&(e._infScroll.style.overflow="visible",e._infScroll.style.transform="translate3d(0px, "+(e.currentY-e.startY)+"px, 0px)")))},e.onEnd=function(){e.startY=0,e.currentY=0,e.dragging=!1,e.state.pullToRefreshThresholdBreached&&(e.props.refreshFunction&&e.props.refreshFunction(),e.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){e._infScroll&&(e._infScroll.style.overflow="auto",e._infScroll.style.transform="none",e._infScroll.style.willChange="unset")})},e.onScrollListener=function(t){typeof e.props.onScroll=="function"&&setTimeout(function(){return e.props.onScroll&&e.props.onScroll(t)},0);var l=e.props.height||e._scrollableNode?t.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!e.actionTriggered){var a=e.props.inverse?e.isElementAtTop(l,e.props.scrollThreshold):e.isElementAtBottom(l,e.props.scrollThreshold);a&&e.props.hasMore&&(e.actionTriggered=!0,e.setState({showLoader:!0}),e.props.next&&e.props.next()),e.lastScrollTop=l.scrollTop}},e.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:n.dataLength},e.throttledOnScrollListener=M(150,e.onScrollListener).bind(e),e.onStart=e.onStart.bind(e),e.onMove=e.onMove.bind(e),e.onEnd=e.onEnd.bind(e),e}return o.prototype.componentDidMount=function(){if(typeof this.props.dataLength>"u")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},o.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},o.prototype.componentDidUpdate=function(n){this.props.dataLength!==n.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},o.getDerivedStateFromProps=function(n,e){var t=n.dataLength!==e.prevDataLength;return t?m(m({},e),{prevDataLength:n.dataLength}):null},o.prototype.isElementAtTop=function(n,e){e===void 0&&(e=.8);var t=n===document.body||n===document.documentElement?window.screen.availHeight:n.clientHeight,l=F(e);return l.unit===u.Pixel?n.scrollTop<=l.value+t-n.scrollHeight+1:n.scrollTop<=l.value/100+t-n.scrollHeight+1},o.prototype.isElementAtBottom=function(n,e){e===void 0&&(e=.8);var t=n===document.body||n===document.documentElement?window.screen.availHeight:n.clientHeight,l=F(e);return l.unit===u.Pixel?n.scrollTop+t>=n.scrollHeight-l.value:n.scrollTop+t>=l.value/100*n.scrollHeight},o.prototype.render=function(){var n=this,e=m({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),t=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),l=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return y.createElement("div",{style:l,className:"infinite-scroll-component__outerdiv"},y.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(a){return n._infScroll=a},style:e},this.props.pullDownToRefresh&&y.createElement("div",{style:{position:"relative"},ref:function(a){return n._pullDown=a}},y.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!t&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},o}(N.Component);const x=["#00CCFF","#9733FF","#FFF35C","#FF6666","#00FF99"],k=({loading:s,loadMoreGifs:o,hasMore:n,loadingMore:e})=>{var p;const{gifs:t}=P(),l=Array(10).fill({isGhost:!0}),a=e?[...t==null?void 0:t.data,...l]:(t==null?void 0:t.data)||[];return s&&(!(t!=null&&t.data)||t.data.length===0)?i.jsxs("div",{className:"loader",children:[i.jsx("div",{}),i.jsx("div",{}),i.jsx("div",{}),i.jsx("div",{}),i.jsx("div",{})]}):!s&&(!(t!=null&&t.data)||t.data.length===0)?i.jsx("div",{className:"flex flex-col items-center justify-center h-screen",children:i.jsx("h2",{className:"text-2xl font-bold",children:"No Gifs Found"})}):i.jsx(H,{dataLength:((p=t==null?void 0:t.data)==null?void 0:p.length)||0,next:o,hasMore:n,loader:null,scrollThreshold:.8,className:"mt-5",children:i.jsx("div",{className:"columns-2 md:columns-3 lg:columns-4 xl:columns-5 gap-2",children:a.map((r,c)=>{var f,d,v,h,w,T,_,S,b,L,g,D,j;return r.isGhost?i.jsx("div",{className:"w-full mb-2 relative rounded",style:{height:"250px",background:`${x[c%x.length]}`}},`ghost-${c}`):i.jsx(R,{to:`${r.type}/${r.slug}`,className:"block mb-2",children:i.jsxs("div",{className:"w-full mb-2 relative bg-png-pattern cursor-pointer group",children:[i.jsx("img",{src:(f=r==null?void 0:r.images)==null?void 0:f.fixed_width.webp,srcSet:`
                                    ${(v=(d=r==null?void 0:r.images)==null?void 0:d.fixed_width_small)==null?void 0:v.webp} 100w,
                                    ${(w=(h=r==null?void 0:r.images)==null?void 0:h.fixed_width)==null?void 0:w.webp} 200w,
                                    ${(_=(T=r==null?void 0:r.images)==null?void 0:T.original)==null?void 0:_.webp} 480w,
                                `,alt:r!=null&&r.alt_text?r==null?void 0:r.alt_text:r==null?void 0:r.title,sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw",className:`w-full object-cover rounded transition-all duration-300 ${r.type==="text"||r.type==="sticker"?"transparent-bg-stickers-text":""}`,decoding:"async",width:(S=r==null?void 0:r.images)==null?void 0:S.original.width,height:(b=r==null?void 0:r.images)==null?void 0:b.original.height,fetchPriority:c<4?"high":"auto",loading:c<8?"eager":"lazy",style:{background:r.type!=="text"&&r.type!=="sticker"?x[c%x.length]:""}}),((L=r==null?void 0:r.user)==null?void 0:L.display_name)&&i.jsxs("div",{className:"absolute inset-0 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-gradient-to-b from-transparent via-transparent to-black font-bold flex items-end gap-2 p-2 z-10",children:[i.jsx("img",{src:(g=r==null?void 0:r.user)==null?void 0:g.avatar_url,alt:(D=r==null?void 0:r.user)==null?void 0:D.display_name,className:"h-8 object-cover rounded-full",width:"32",height:"32",loading:"lazy",decoding:"async"}),i.jsx("span",{children:(j=r==null?void 0:r.user)==null?void 0:j.display_name})]})]})},r==null?void 0:r.id)})})})};export{k as G};
